(function(t){function e(e){for(var n,s,a=e[0],l=e[1],u=e[2],h=0,d=[];h<a.length;h++)s=a[h],r[s]&&d.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,a=1;a<o.length;a++){var l=o[a];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue2048/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=l;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("c21b"),r=o.n(n);r.a},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d"),o("78a7"),o("c1c3");var n=o("2b0e"),r=o("ca95"),i=o.n(r),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("board-view")],1)},a=[],l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-touch",{on:{swipeleft:t.onSwipeLeft,swiperight:t.onSwipeRight,swipeup:t.onSwipeUp,swipedown:t.onSwipeDown}},[o("br"),o("br"),o("p",[t._v("Score："+t._s(t.score)),o("span",{staticStyle:{float:"right"}},[t._v("Time:  "+t._s(t.time)+"s")])]),o("div",{staticClass:"board",attrs:{tabIndex:"1"}},[t._l(t.board.cells,function(e){return o("div",{key:e.key},t._l(e,function(t){return o("cell",{key:t.key})}))}),t._l(t.tiles,function(t){return o("tile-view",{key:t.id,attrs:{tile:t}})}),o("game-end-overlay",{attrs:{board:t.board,"on-restart":t.onRestart,"game-time":t.time,"game-score":t.score}}),o("game-start",{on:{"count-time":t.addTime}})],2),o("br"),o("p",[t._v("备注：PC端按F12调整大小,使用键盘方向键操作")])])},u=[],c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"cell"},[t._v(t._s(""))])},h=[],d={data:function(){return{msg:"hello 2048"}}},f=d,p=o("2877"),m=Object(p["a"])(f,c,h,!1,null,null,null);m.options.__file="Cell.vue";var v=m.exports,w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{class:t.classes},[t._v(t._s(t.tile.value))])},b=[],y={props:{tile:{type:Object,required:!0}},computed:{classes:function(){var t=this.tile,e=["tile"];return e.push("tile"+this.tile.value),t.mergedInto||e.push("position_"+t.row+"_"+t.column),t.mergedInto&&e.push("merged"),t.isNew()&&e.push("new"),t.hasMoved()&&(e.push("row_from_"+t.fromRow()+"_to_"+t.toRow()),e.push("column_from_"+t.fromColumn()+"_to_"+t.toColumn()),e.push("isMoving")),e.join(" ")}}},_=y,g=Object(p["a"])(_,w,b,!1,null,null,null);g.options.__file="TileView.vue";var C=g.exports,T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"overlay"},[o("span",{staticClass:"message"},[t._v("Score: "+t._s(t.gameScore))]),o("span",{staticClass:"message"},[t._v("Time: "+t._s(t.gameTime)+"s")]),o("span",{staticClass:"message"},[t._v(t._s(t.contents))]),o("br"),o("button",{staticClass:"tryAgain",on:{click:t.restart}},[t._v("Try again")])])},R=[],S=(o("c5f6"),{props:{board:{type:Object,required:!0},onRestart:{type:Function,required:!0},gameTime:{type:Number,required:!0},gameScore:{type:Number,required:!0}},computed:{show:function(){return this.board.hasWon()||this.board.hasLost()},contents:function(){return this.board.hasWon()?"Good job!":this.board.hasLost()?"Game Over!":""}},methods:{restart:function(){this.onRestart&&this.onRestart()}}}),O=S,k=Object(p["a"])(O,T,R,!1,null,null,null);k.options.__file="GameEndOverlay.vue";var j=k.exports,I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.isStart,expression:"isStart"}],staticClass:"overlay"},[o("p",{staticClass:"message"},[t._v("Have Fun!")]),o("button",{staticClass:"tryAgain",on:{click:t.start}},[t._v("Start!")])])},x=[],E={data:function(){return{isStart:!0}},props:{},methods:{restart:function(){this.onRestart&&this.onRestart()},start:function(){this.isStart=!1,this.$emit("count-time")}}},P=E,D=Object(p["a"])(P,I,x,!1,null,null,null);D.options.__file="GameStart.vue";var z=D.exports,L=(o("ac6a"),function(t){for(var e=t.length,o=t[0].length,n=[],r=0;r<e;++r){n.push([]);for(var i=0;i<o;++i)n[r][i]=t[i][o-r-1]}return n}),M=function t(e,o,n){this.value=e||0,this.row=o||-1,this.column=n||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=t.id++};M.id=0,M.prototype.moveTo=function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e},M.prototype.isNew=function(){return-1==this.oldRow&&!this.mergedInto},M.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},M.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},M.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},M.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column},M.prototype.hasMoved=function(){return-1!=this.fromRow()&&(this.fromRow()!=this.toRow()||this.fromColumn()!=this.toColumn())||this.mergedInto};var W=function(t,e){this.subRow=t,this.subColumn=e},$=function t(){this.tiles=[],this.cells=[];for(var e=0;e<t.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1,this.score=0};$.prototype.addTile=function(){var t=new M;return M.apply(t,arguments),this.tiles.push(t),t},$.size=4,$.prototype.moveLeft=function(){for(var t=!1,e=0;e<$.size;++e){for(var o=this.cells[e].filter(function(t){return 0!=t.value}),n=[],r=0;r<$.size;++r){var i=o.length?o.shift():this.addTile();if(o.length>0&&o[0].value==i.value){var s=i;i=this.addTile(i.value),s.mergedInto=i;var a=o.shift();a.mergedInto=i,i.value+=a.value}n[r]=i,this.won|=2048==i.value,t|=i.value!=this.cells[e][r].value}this.cells[e]=n}return t},$.prototype.setPositions=function(){this.cells.forEach(function(t,e){t.forEach(function(t,o){t.oldRow=t.row,t.oldColumn=t.column,t.row=e,t.column=o,t.markForDeletion=!1})})},$.fourProbability=.1,$.prototype.addRandomTile=function(){for(var t=[],e=0;e<$.size;++e)for(var o=0;o<$.size;++o)0==this.cells[e][o].value&&t.push(new W(e,o));var n=~~(Math.random()*t.length),r=t[n];if(r){var i=Math.random()<$.fourProbability?4:2;this.cells[r.subRow][r.subColumn]=this.addTile(i),this.score+=i}},$.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter(function(t){return 0==t.markForDeletion}),this.tiles.forEach(function(t){t.markForDeletion=!0})},$.prototype.move=function(t){this.clearOldTiles();for(var e=0;e<t;++e)this.cells=L(this.cells);for(var o=this.moveLeft(),n=t;n<4;++n)this.cells=L(this.cells);return o&&this.addRandomTile(),this.setPositions(),this},$.prototype.hasWon=function(){return this.won},$.deltaX=[-1,0,1,0],$.deltaY=[0,-1,0,1],$.prototype.hasLost=function(){for(var t=!1,e=0;e<$.size;++e)for(var o=0;o<$.size;++o){t|=0==this.cells[e][o].value;for(var n=0;n<4;++n){var r=e+$.deltaX[n],i=o+$.deltaY[n];r<0||r>=$.size||i<0||i>=$.size||(t|=this.cells[e][o].value==this.cells[r][i].value)}}return!t};var F={components:{Cell:v,TileView:C,GameEndOverlay:j,GameStart:z},data:function(){return{board:new $,score:0,time:0,timer:null}},methods:{addTime:function(){var t=this;this.timer=setInterval(function(){t.time+=1,(t.board.hasWon()||t.board.hasLost())&&(clearInterval(t.timer),t.timer=null)},1e3)},handleKeyDown:function(t){if(!this.board.hasWon()&&t.keyCode>=37&&t.keyCode<=40){t.preventDefault();var e=t.keyCode-37;this.board.move(e),this.score=this.board.score}},onRestart:function(){this.board=new $,this.time=0,this.addTime()},onSwipeLeft:function(){this.board.hasWon()||(this.board.move(0),this.score=this.board.score)},onSwipeRight:function(){this.board.hasWon()||(this.board.move(2),this.score=this.board.score)},onSwipeUp:function(){this.board.hasWon()||(this.board.move(1),this.score=this.board.score)},onSwipeDown:function(){this.board.hasWon()||(this.board.move(3),this.score=this.board.score)}},computed:{tiles:function(){return this.board.tiles.filter(function(t){return 0!=t.value})}},mounted:function(){window.addEventListener("keydown",this.handleKeyDown.bind(this))},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown.bind(this))}},G=F,N=Object(p["a"])(G,l,u,!1,null,null,null);N.options.__file="BoardView.vue";var q=N.exports,V={name:"app",components:{BoardView:q}},A=V,K=(o("034f"),Object(p["a"])(A,s,a,!1,null,null,null));K.options.__file="App.vue";var B=K.exports;n["a"].use(i.a,{name:"v-touch"}),i.a.config.swipe={threshold:100},n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(B)}}).$mount("#app")},"78a7":function(t,e,o){},c1c3:function(t,e,o){},c21b:function(t,e,o){}});
//# sourceMappingURL=app.js.map